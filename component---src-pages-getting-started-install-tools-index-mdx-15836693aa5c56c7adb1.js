(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{413:function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return o})),a.d(t,"default",(function(){return d}));a(11),a(5),a(6),a(4),a(10),a(1),a(0);var n=a(106),r=a(445);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var o={},l=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(n.b)("div",t)}},s=l("Tabs"),c=l("Tab"),b=l("PageDescription"),p={_frontmatter:o},u=r.a;function d(e){var t=e.components,a=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,["components"]);return Object(n.b)(u,i({},p,a,{components:t,mdxType:"MDXLayout"}),Object(n.b)(s,{mdxType:"Tabs"},Object(n.b)(c,{label:"Pre-requisites",mdxType:"Tab"},Object(n.b)(b,{mdxType:"PageDescription"},Object(n.b)("p",null,"Prepare to run the scripts that create a cluster")),Object(n.b)("p",null,"The IBM Garage for Cloud Developer Tools facilitate development and deployment of cloud-native applications.\nThey can be hosted in any Kubernetes or OpenShift cluster.\nOnce that cluster is created, follow these instructions\nthat explain how to access, configure, and run the scripts to install the Developer Tools into the cluster."),Object(n.b)("p",null,"The following pre-requisties are required before following the setup instructions."),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",i({parentName:"li"},{href:"https://www.docker.com/products/docker-desktop"}),"Docker Desktop")," installed and running on your local machine"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",i({parentName:"li"},{href:"https://nodejs.org/en/"}),"Node")," installed on your local machine"))),Object(n.b)(c,{label:"1. Download",mdxType:"Tab"},Object(n.b)(b,{mdxType:"PageDescription"},Object(n.b)("p",null,"Obtain the scripts that create a cluster")),Object(n.b)("p",null,"Clone the ",Object(n.b)("a",i({parentName:"p"},{href:"https://github.com/ibm-garage-cloud/ibm-garage-iteration-zero"}),"ibm-garage-iteration-zero")," Git repository to your local filesystem"),Object(n.b)("pre",null,Object(n.b)("code",i({parentName:"pre"},{className:"language-bash"}),"git clone git@github.com:ibm-garage-cloud/ibm-garage-iteration-zero.git\n")),Object(n.b)("p",null,"Switch to the cloned directory"),Object(n.b)("pre",null,Object(n.b)("code",i({parentName:"pre"},{className:"language-bash"}),"cd ibm-garage-iteration-zero\n"))),Object(n.b)(c,{label:"3. TF Variables",mdxType:"Tab"},Object(n.b)("p",null,"The settings for creating the Developer Tools environment go in a properties file called ",Object(n.b)("inlineCode",{parentName:"p"},"terraform.tfvars"),".\nThe process installs the tools into an existing cluster."),Object(n.b)("p",null,"The file you will edit is ",Object(n.b)("inlineCode",{parentName:"p"},"./terraform/settings/terraform.tfvars"),"."),Object(n.b)("h3",{id:"variables"},"Variables"),Object(n.b)("p",null,"The properties are required but have reasonable defaults, so setting them is optional."),Object(n.b)("p",null,"The values look like this:"),Object(n.b)("pre",null,Object(n.b)("code",i({parentName:"pre"},{className:"language-bash"}),'# The type of cluster that will be created/used (kubernetes or openshift)\ncluster_type="kubernetes"\n# Flag indicating if we are using an existing cluster or creating a new one\ncluster_exists="true"\n# Flag indicating if we are using an existing PostgreSQL server or creating a new one\npostgres_server_exists="false"\n')),Object(n.b)("p",null,"(<<We’re going to need to add something to this file that specifies how to find and connect to\nthe existing cluster.>>)"),Object(n.b)("h3",{id:"scenarios"},"Scenarios"),Object(n.b)("p",null,"These are scenarios for using these settings:"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"To specify installing the tools into an existing cluster, set ",Object(n.b)("inlineCode",{parentName:"p"},"cluster_exists")," and ",Object(n.b)("inlineCode",{parentName:"p"},"cluster_type"),".")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"To specify that the existing cluster already has a PostgreSQL service instance, set ",Object(n.b)("inlineCode",{parentName:"p"},"postgres_server_exists"),".")))),Object(n.b)(c,{label:"4. Run",mdxType:"Tab"},Object(n.b)("p",null,"Having configured the ",Object(n.b)("inlineCode",{parentName:"p"},"credentials.properties")," and ",Object(n.b)("inlineCode",{parentName:"p"},"terraform.tfvars")," files, we are now ready to kick off the installation."),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Launch a ",Object(n.b)("a",i({parentName:"p"},{href:"https://github.com/ibm-garage-cloud/ibm-garage-cli-tools",title:"Cloud Garage Tools Docker image"}),"IBM Garage for Developer Tools Docker container"),"."),Object(n.b)("p",{parentName:"li"},"  Run the following command to run the Docker container:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",i({parentName:"pre"},{className:"language-bash"}),"./launch.sh\n")),Object(n.b)("p",{parentName:"li"},"  This will install the Cloud Garage Tools Docker image and exec shell into the running container. The container will\nmount the filesystem’s ",Object(n.b)("inlineCode",{parentName:"p"},"./terraform/")," directory as ",Object(n.b)("inlineCode",{parentName:"p"},"/home/devops/src/"),". Once the Docker container has started and\nthe script has exec shelled into it, you will see an IBM Garage banner. This will help you identify you are running\ninside the Docker image that has just mounted your file system."),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",i({parentName:"pre"},{className:"language-bash"}),"% ./launch.sh\nCleaning up old container: ibm-garage-cli-tools-abcde\nInitializing container ibm-garage-cli-tools-abcde from garagecatalyst/ibm-garage-cli-tools:0.0.24\nd14e378eac5f8080dbaf5466d680396fc36f9fcf9433247409ea9b3a62326ad2\nAttaching to running container...\n    ________  __  ___   ________                __   ______\n   /  _/ __ )/  |/  /  / ____/ /___  __  ______/ /  / ____/___ __________ _____ ____\n   / // __  / /|_/ /  / /   / / __ \\/ / / / __  /  / / __/ __ `/ ___/ __ `/ __ `/ _ \\\n _/ // /_/ / /  / /  / /___/ / /_/ / /_/ / /_/ /  / /_/ / /_/ / /  / /_/ / /_/ /  __/\n/___/_____/_/  /_/   \\____/_/\\____/\\__,_/\\__,_/   \\____/\\__,_/_/   \\__,_/\\__, /\\___/\n                                                                        /____/\nRun 'image-help' to get a list of available tools, scripts, and ENV properties\n")),Object(n.b)("p",{parentName:"li"},"  The ",Object(n.b)("inlineCode",{parentName:"p"},"image-help")," command shows what can be done in this conatiner:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",i({parentName:"pre"},{className:"language-bash"}),"$ image-help\nAvailable env properties (can be overridden for individual commands):\n> BM_API_KEY - the IBM Cloud api key\n> REGION - the IBM Cloud region (e.g. us-south)\n> RESOURCE_GROUP - the IBM Cloud resource group\n> CLUSTER_NAME - the name of the kubernetes cluster in IBM Cloud\n> SL_USERNAME - the Classic Infrastructure user name or API user name (e.g. 282165_joe@us.ibm.com)\n> SL_API_KEY - the Classic Infrastructure api key\n\nAvailable tools:\n> terraform (with helm, kube, and ibm provider plugins)\n> calicoctl\n> ibmcloud (with container-service, container-registry, and cloud-databases plugins)\n> kubectl\n> kustomize\n> oc\n> helm\n> docker\n> git\n> nvm\n> node (v11.12.0 currently installed)\n> yo\n\nAvailable scripts:\n> init.sh {BM_API_KEY} {REGION} {RESOURCE_GROUP} {CLUSTER_NAME}\n> createNamespaces.sh\n> deleteNamespace.sh\n> installHelm.sh\n> cluster-pull-secret-apply.sh\n> setup-namespace-pull-secrets.sh\n> checkPodRunning.sh\n> copy-secret-to-namespace.sh\n"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Install the Developer Tools"),Object(n.b)("p",{parentName:"li"},"  The supplied Terraform script is ready to run using the settings in ",Object(n.b)("inlineCode",{parentName:"p"},"terraform.tfvars"),".\nYou optionally can extend or modify the scripts and tailor them for your project’s specific needs."),Object(n.b)("p",{parentName:"li"},"  Run this script in the container:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",i({parentName:"pre"},{className:"language-bash"}),"./runTerraform.sh\n")),Object(n.b)("p",{parentName:"li"},"  This script will install the Developer Tools into the cluster."),Object(n.b)("p",{parentName:"li"},"  The script will verify some basic settings and prompt if you want to proceed. After you select ",Object(n.b)("strong",{parentName:"p"},"Y")," (for yes),\nthe Terraform Apply process will begin to create the infrastructure and services for your environment."),Object(n.b)("p",{parentName:"li"},"  If ",Object(n.b)("inlineCode",{parentName:"p"},"terraform.tfvars")," specifies an existing cluster, the contents will be cleaned up to prepare for the terraform\nprocess. Any resources in the ",Object(n.b)("inlineCode",{parentName:"p"},"tools"),", ",Object(n.b)("inlineCode",{parentName:"p"},"dev"),", ",Object(n.b)("inlineCode",{parentName:"p"},"test"),", and ",Object(n.b)("inlineCode",{parentName:"p"},"staging")," namespaces will be deleted."),Object(n.b)("p",{parentName:"li"},"  Creating a new cluster takes about 1.5 hours on average (but can also take considerably longer)\nand the rest of the process takes about 30 minutes. At the end, you should have your Developer Tools environment\nfully provisioned and configured. Enjoy!"))),Object(n.b)("h3",{id:"developer-tools-environment"},"Developer Tools environment"),Object(n.b)("p",null,"Once the Terraform scripts have finished, you can see the resources that the scripts created."),Object(n.b)("p",null,"To see this in IBM Cloud:"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"In the IBM Cloud console, open the ",Object(n.b)("a",i({parentName:"li"},{href:"https://cloud.ibm.com/docs/overview?topic=overview-ui#dashboardview",title:"Managing resources in the resource list"}),"Resource List")),Object(n.b)("li",{parentName:"ul"},"On the Resource List page, filter by your Resource Group (e.g. ",Object(n.b)("inlineCode",{parentName:"li"},"catalyst-team"),")"),Object(n.b)("li",{parentName:"ul"},"You should see these resources listed:",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"Clusters"),": 1, either Kubernetes or OpenShift"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"Services"),": 5 or so, such as PostgreSQL, LogDNA, etc."),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"Storage"),": 1, an instance of Cloud Object Storage"))),Object(n.b)("li",{parentName:"ul"},"Select the cluster and open the Kubernetes dashboard or OpenShift web console. You should see:",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"Namespaces: ",Object(n.b)("inlineCode",{parentName:"li"},"tools"),", ",Object(n.b)("inlineCode",{parentName:"li"},"dev"),", ",Object(n.b)("inlineCode",{parentName:"li"},"test"),", and ",Object(n.b)("inlineCode",{parentName:"li"},"staging")),Object(n.b)("li",{parentName:"ul"},"Deployments in the ",Object(n.b)("inlineCode",{parentName:"li"},"tools")," namespace: ",Object(n.b)("inlineCode",{parentName:"li"},"catalyst-dashboard"),", ",Object(n.b)("inlineCode",{parentName:"li"},"jenkins"),", etc.")))),Object(n.b)("h3",{id:"possible-issues"},"Possible issues"),Object(n.b)("p",null,"If you find that that the Terraform provisioning has failed, try re-running the ",Object(n.b)("inlineCode",{parentName:"p"},"runTerraform.sh")," script again.\nThe state will be saved and Terraform will try and apply the configuration to match the desired end state."),Object(n.b)("p",null,"If you find that some of the services have failed to create in the time allocated, you can try this:"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Manually delete the service instances in your resource group"),Object(n.b)("li",{parentName:"ul"},"Delete the ",Object(n.b)("inlineCode",{parentName:"li"},"workspace")," directory (which will remove any state that has been created by Terraform)"),Object(n.b)("li",{parentName:"ul"},"Re-run the ",Object(n.b)("inlineCode",{parentName:"li"},"runTerraform.sh")," script")),Object(n.b)("pre",null,Object(n.b)("code",i({parentName:"pre"},{className:"language-bash"}),"rm -rf workspace\n./runTerraform.sh\n")))))}d.isMDXComponent=!0},443:function(e){e.exports=JSON.parse('{"data":{"site":{"pathPrefix":"/ibm-garage-developer-guide"}}}')},444:function(e){e.exports=JSON.parse('{"data":{"site":{"siteMetadata":{"repository":{"baseUrl":"","subDirectory":"","branch":"master"}}}}}')},445:function(e,t,a){"use strict";a(32),a(28);var n=a(1),r=a(443),i=a(0),o=a.n(i),l=a(105),s=a.n(l),c=a(195),b=a(127),p=a(3),u=a.n(p),d=a(384),m=function(e){var t,a=e.title,r=e.tabs,i=void 0===r?[]:r;return Object(n.b)("div",{className:u()(d.pageHeader,(t={},t[d.withTabs]=i.length,t))},Object(n.b)("div",{className:"bx--grid"},Object(n.b)("div",{className:"bx--row"},Object(n.b)("div",{className:"bx--col-lg-12"},Object(n.b)("h1",{id:"page-title",className:d.text},a)))))},h=a(444),_=a(385),g=function(e){var t=e.relativePagePath,a=e.repository,r=h.data.site.siteMetadata.repository,i=a||r,o=i.baseUrl,l=i.subDirectory,s=o+"/edit/"+i.branch+l+"/src/pages"+t;return o?Object(n.b)("div",{className:"bx--row "+_.row},Object(n.b)("div",{className:"bx--col"},Object(n.b)("a",{className:_.link,href:s},"Edit this page on GitHub"))):null},O=a(193),j=(a(59),a(26)),f=a(386);var N=function(e){var t,a;function r(){return e.apply(this,arguments)||this}return a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,r.prototype.render=function(){var e=this.props,t=e.tabs,a=e.slug,r=a.split("/").filter(Boolean).slice(-1)[0],i=t.map((function(e){var t,i=s()(e,{lower:!0}),o=i===r,l=new RegExp(r+"(?!-)"),c=a.replace(l,i);return Object(n.b)("li",{key:e,className:u()((t={},t[f.selectedItem]=o,t),f.listItem)},Object(n.b)(j.Link,{className:f.link,to:""+c},e))}));return Object(n.b)("div",{className:f.tabsContainer},Object(n.b)("div",{className:"bx--grid"},Object(n.b)("div",{className:"bx--row"},Object(n.b)("div",{className:"bx--col-lg-12 bx--col-no-gutter"},Object(n.b)("nav",null,Object(n.b)("ul",{className:f.list},i))))))},r}(o.a.Component),v=a(194);t.a=function(e){var t=e.pageContext,a=e.children,i=e.location,o=e.Title,l=t.frontmatter,p=void 0===l?{}:l,u=t.relativePagePath,d=t.titleType,h=p.tabs,_=p.title,j=p.theme,f=p.description,y=p.keywords,T=r.data.site.pathPrefix,w=T?i.pathname.replace(T,""):i.pathname,C=h?w.split("/").slice(-1)[0]||s()(h[0],{lower:!0}):"";return Object(n.b)(b.a,{homepage:!1,theme:j,pageTitle:_,pageDescription:f,pageKeywords:y,titleType:d},Object(n.b)(m,{title:o?Object(n.b)(o,null):_,label:"label",tabs:h}),h&&Object(n.b)(N,{slug:w,tabs:h,currentTab:C}),Object(n.b)(v.a,{padded:!0},a,Object(n.b)(g,{relativePagePath:u})),Object(n.b)(O.a,{pageContext:t,location:i,slug:w,tabs:h,currentTab:C}),Object(n.b)(c.a,null))}}}]);
//# sourceMappingURL=component---src-pages-getting-started-install-tools-index-mdx-15836693aa5c56c7adb1.js.map